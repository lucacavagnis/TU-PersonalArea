import{r as q,u as v,a as i,j as t}from"./app.363ed9f1.js";import{B as g}from"./Button.340eadde.js";import{T as u}from"./TextInput.69fd9cda.js";import{I as o}from"./InputLabel.8f6f9ae5.js";import{S as h}from"./Select.45a19f40.js";import{a as y,g as C}from"./String.081073ca.js";import{h as x}from"./moment.9709ab41.js";const S=({default_value:r,companies:l})=>{let n;const[s]=q.exports.useState([0,1]);r?n={...r,date:x(r.date).format("YYYY-MM-DD"),expiring_date:x(r.expiring_date).format("YYYY-MM-DD")}:n={referral:"",date:y(Date()),expiring_date:y(new Date(new Date().getTime()+365*24*60*60*1e3)),company:l[0],type:s[0]};const{data:d,setData:m,post:w,put:D}=v({referral:n.referral,date:n.date,expiring_date:n.expiring_date,company_id:n.company.id,type:n.type}),c=()=>{r?D(route("admin.protocols.update",n.id)):w(route("admin.protocols.store"))},p=e=>{e.preventDefault(),m(e.target.name,e.target.value)},f=e=>F=>{m(e,F)};return i(a,{children:[t(a.Row,{children:i(a.Field,{children:[t(o,{forInput:"referral",value:"Riferimento",required:!0}),t(u,{name:"referral",handleChange:e=>p(e),value:d.referral,required:!0,className:"w-full"})]})}),i(a.Row,{children:[i(a.Field,{children:[t(o,{forInput:"date",value:"Data",required:!0}),t(u,{type:"date",name:"date",handleChange:e=>p(e),value:d.date,required:!0,className:"w-full"})]}),i(a.Field,{children:[t(o,{forInput:"expiring_date",value:"Data di scadenza",required:!0}),t(u,{type:"date",name:"expiring_date",handleChange:e=>p(e),value:d.expiring_date,required:!0,className:"w-full"})]})]}),i(a.Row,{children:[i(a.Field,{children:[t(o,{forInput:"company",value:"Azienda",required:!0}),t(h,{people:l,onChange:f("company_id"),initial:n.company,getName:e=>e.id+" - "+e.name})]}),i(a.Field,{children:[t(o,{forInput:"type",value:"Tipo",required:!0}),t(h,{people:s,onChange:f("type"),initial:n.type,getValue:e=>e,getName:e=>C(e)})]})]}),r?t(g,{type:"button",onClick:c,children:"Modifica"}):t(g,{type:"button",onClick:c,children:"Aggiungi"})]})},a=({children:r})=>t("form",{children:r}),I=({children:r})=>t("div",{className:"flex justify-between w-full [&>first]:ml-0 [&>last]:mr-0 [&>*]:mx-2 [&>*]:w-full mb-4",children:r}),Y=({children:r,widthClass:l})=>t("div",{className:l+" [&>*]>w-full",children:r});a.Row=I;a.Field=Y;export{S as P};
