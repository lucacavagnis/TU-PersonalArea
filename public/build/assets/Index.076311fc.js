import{r as u,j as t,a as S,d as O,H as A}from"./app.363ed9f1.js";import{A as V}from"./AdminLayout.b4f5157d.js";import{T as G}from"./Tab.2e64c000.js";import{r as p,i as f,a as x,d as H}from"./Close.91e35d50.js";import{G as m,D as T,a as q}from"./DataGrid.bb03f3d9.js";import{G as v,i as B,a as U}from"./itIT.6fb8bf58.js";import{B as L}from"./Box.9f6d6e5f.js";import{S as F,A as J}from"./Alert.67031798.js";import{B as K}from"./ClickAwayListener.3bc0bcd2.js";import"./ApplicationLogo.64869274.js";import"./transition.13d8f845.js";import"./tw-merge.25811ea8.js";import"./Close.0e3a87e0.js";import"./InputAdornment.0011bc57.js";import"./Checkbox.e80ebbbf.js";import"./Switch.eaa593d5.js";import"./CircularProgress.02bb978b.js";var w={},Q=f.exports;Object.defineProperty(w,"__esModule",{value:!0});var y=w.default=void 0,W=Q(p()),X=x,Y=(0,W.default)((0,X.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");y=w.default=Y;var M={},Z=f.exports;Object.defineProperty(M,"__esModule",{value:!0});var $=M.default=void 0,ee=Z(p()),te=x,oe=(0,ee.default)((0,te.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");$=M.default=oe;var _={},ae=f.exports;Object.defineProperty(_,"__esModule",{value:!0});var k=_.default=void 0,re=ae(p()),ie=x,se=(0,re.default)((0,ie.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined");k=_.default=se;var b={},le=f.exports;Object.defineProperty(b,"__esModule",{value:!0});var E=b.default=void 0,de=le(p()),ne=x,ce=(0,de.default)((0,ne.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");E=b.default=ce;function ue(a){const{setRows:r,setRowModesModel:n,rows:i}=a;return t(U,{children:t(K,{color:"primary",startIcon:t(y,{}),onClick:()=>{const h=i.find(l=>l.id===Math.max(...i.map(g=>g.id))).id+1;r(l=>[...l,{id:h,name:"",isNew:!0}]),n(l=>({...l,[h]:{mode:m.Edit,fieldToFocus:"name"}}))},className:"border-1 border-slate-700",sx:{border:1,margin:1},children:"Nuova categoria"})})}function me({categories:a}){const[r,n]=u.exports.useState(a),[i,d]=u.exports.useState({}),h=(e,s)=>{e.reason===q.rowFocusOut&&(s.defaultMuiPrevented=!0)},l=e=>()=>{d({...i,[e]:{mode:m.Edit}})},g=e=>()=>{d({...i,[e]:{mode:m.View}})},N=e=>()=>{O.Inertia.delete(route("admin.categories.destroy",e),{onSuccess:()=>{c({children:"Categoria eliminata con successo",severity:"success"}),n(r.filter(s=>s.id!==e))},onError:s=>c({children:s.message,severity:"error"})})},j=e=>()=>{d({...i,[e]:{mode:m.View,ignoreModifications:!0}}),r.find(o=>o.id===e).isNew&&n(r.filter(o=>o.id!==e))},D=u.exports.useCallback(async(e,s)=>{const o={...e,isNew:!1};return await axios.post(route("admin.categories.store"),o),c({children:"Categoria salvata con successo",severity:"success"}),o},[]),I=e=>{d(e)},P=u.exports.useCallback(e=>{c({children:e.response.data.message,severity:"error"})},[]),z=[{field:"name",headerName:"Nome",width:180,editable:!0},{field:"parent_id",headerName:"Genitore",width:220,editable:!0,type:"singleSelect",getOptionLabel:e=>e.name,getOptionValue:e=>e.id,valueOptions:[...r,{id:null,name:"--"}]},{field:"actions",type:"actions",headerName:"Azioni",width:100,cellClassName:"actions",getActions:({id:e})=>{var o;return((o=i[e])==null?void 0:o.mode)===m.Edit?[t(v,{icon:t(E,{}),label:"Save",sx:{color:"primary.main"},onClick:g(e)}),t(v,{icon:t(H,{}),label:"Cancel",className:"textPrimary",onClick:j(e),color:"inherit"})]:[t(v,{icon:t($,{}),label:"Edit",className:"textPrimary",onClick:l(e),color:"inherit"}),t(v,{icon:t(k,{}),label:"Delete",onClick:N(e),color:"inherit",sx:{color:"red"}})]}}],[C,c]=u.exports.useState(null),R=()=>c(null);return S(L,{sx:{height:700,width:"100%","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:[t(T,{rows:r,columns:z,editMode:"row",rowModesModel:i,onRowModesModelChange:I,onRowEditStop:h,processRowUpdate:D,onProcessRowUpdateError:P,slots:{toolbar:ue},slotProps:{toolbar:{setRows:n,setRowModesModel:d,rows:r}},initialState:{sorting:{sortModel:[{field:"name",sort:"asc"}]}},localeText:B.components.MuiDataGrid.defaultProps.localeText,autoPageSize:!0}),!!C&&t(F,{open:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},onClose:R,autoHideDuration:6e3,children:t(J,{...C,onClose:R})})]})}function Ne(a){return console.log(a),S(V,{auth:a.auth,errors:a.errors,header:t("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Catgeorie"}),children:[t(A,{title:"Aziende"}),t("div",{className:"py-12",children:t("div",{className:"max-w-8xl mx-auto sm:px-6 lg:px-8",children:t("div",{className:"bg-white shadow-sm sm:rounded-lg",children:t(G,{children:t(me,{categories:a.categories})})})})})]})}export{Ne as default};
