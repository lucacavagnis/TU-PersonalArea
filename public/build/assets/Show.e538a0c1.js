import{a as e,F as y,j as o,H as w,u as I}from"./app.9cf53d96.js";import{A as P}from"./AdminLayout.cdcab52c.js";import{T as g}from"./Tab.4553dcd7.js";import{P as v}from"./ProductImage.9b221e88.js";import{T as r}from"./Table.b8327e0c.js";import{A as H}from"./ActionColumn.67fbbe54.js";import{I as f}from"./InstantSubmitInput.4abf0c1e.js";import{D as c}from"./Show.9b60a106.js";import{P as p}from"./Protocol.8a54e017.js";import{I as s}from"./InputLabel.b1193c5c.js";import{T as N}from"./TextInput.404d7ca3.js";import{B as F}from"./Button.aeed048a.js";import{S as b}from"./Select.e75988b9.js";import{A as z}from"./AddNewLine.4f24b426.js";import"./ApplicationLogo.255706c0.js";import"./transition.7ecc9aaa.js";import"./index.esm.ccc05c29.js";import"./tw-merge.25811ea8.js";import"./Pagination.490ae011.js";import"./String.ccfadc51.js";import"./ActionButton.6b4d2f32.js";import"./AuthenticatedLayout.71bc2f5c.js";import"./ReservedPrice.6d37e2aa.js";import"./string.da2a3c4d.js";import"./attempt.b698df7c.js";import"./Status.0c10f97e.js";import"./ProductListDetails.9d791d20.js";const T=({protocol:a})=>{const i=a.protocol_lots;function m(l,n){var d=l.split(" ");return d.splice(n,d.length-1),d.join(" ")+(d.length!==l.split(" ").length?"...":"")}return e(r,{route:route("admin.protocols.show",a.id),className:"pb-4",children:i&&i.length>0?e(y,{children:o(r.Inner,{children:[o(r.HeaderRow,{children:[e(r.Header,{name:"id",children:"Image"}),e(r.Header,{name:"date",children:"Sku"}),e(r.Header,{name:"qty_available",children:"Name"}),e(r.Header,{name:"qty_available",children:"Qt.\xE0 disponibile"}),e(r.Header,{name:"qty_total",children:"Qt.\xE0 totale"}),e(r.Header,{children:"Prezzo originale"}),e(r.Header,{children:"Prezzo riservato"}),e(r.Header,{})]}),e(r.Body,{children:i.map(l=>{const n=l.lot;return o(r.Row,{children:[e(r.Field,{children:e(v,{name:n.product.image,className:"w-12 h-12"})}),e(r.Field,{children:n.product.sku}),e(r.Field,{children:m(n.product.name,5)}),e(r.Field,{children:n.qty_available}),e(r.Field,{children:n.qty_total}),e(r.Field,{children:e(f,{step:.01,min:0,defaultValue:l.original_price,type:"number",id:l.id,name:"original_price",routeName:"admin.protocol_lots.update"})}),e(r.Field,{children:e(f,{step:.01,min:0,defaultValue:l.price,type:"number",id:l.id,name:"price",routeName:"admin.protocol_lots.update"})}),e(H,{del:route("admin.protocol_lots.destroy",n.id)})]},l.id)})})]})}):e("p",{className:"py-4",children:"Nessun lotto presente"})})};function ae(a){const i=a.protocol;return o(P,{auth:a.auth,errors:a.errors,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Protocollo"}),children:[e(w,{title:"Protocollo"}),e("div",{className:"py-12",children:o("div",{className:"max-w-8xl mx-auto sm:px-6 lg:px-8",children:[o(g,{containerClassName:"mb-4 w-1/2",children:[e(c,{title:"Tipo",children:e("span",{children:p.typeText(i)})}),e(c,{title:"Riferimento",children:e("span",{children:i.referral})}),e(c,{title:"Data",children:p.getDate(i)}),e(c,{title:"Scdenza",children:p.getExpireDate(i)})]}),o(g,{children:[e("h2",{className:"font-semibold mb-4 border-b",children:"Prodotti del protocolo"}),e(T,{protocol:a.protocol}),a.products.length!=0&&e(A,{protocol:a.protocol,products:a.products})]})]})})]})}const A=({protocol:a,products:i})=>{const{data:m,setData:l,post:n,transform:d}=I({id:a.id,product:i[0],lot_id:i[0].lots[0].id,original_price:0,price:0}),x=()=>{d(t=>({...t,product:t.product.id})),n(route("admin.protocol_lots.store"))},u=t=>{l(t.target.name,t.target.value)},h=t=>_=>{l(t,_)};return e(z,{children:o("div",{className:"flex py-4 pt-4 border-t border-indigo-300 items-end",children:[o("div",{className:"mr-4",children:[e(s,{forInput:"product",value:"Prodotto",className:"mb-2"}),e(b,{people:i,getName:t=>o("div",{className:"flex items-center",children:[e(v,{name:t.image,className:"w-8 h-8 mr-4 mb-0"}),e("p",{children:t.sku})," "]}),onChange:h("product"),getValue:t=>t})]}),o("div",{className:"mr-4",children:[e(s,{forInput:"product",value:"Lotto (Id - Qt.\xE0)",className:"mb-2"}),e(b,{people:m.product.lots,getName:t=>t.id+" - "+t.qty_total,onChange:h("lot_id")})]}),o("div",{className:"mr-4",children:[e(s,{forInput:"date",value:"Prezzo originale",className:"mb-2"}),e(N,{step:.01,type:"number",name:"original_price",value:m.original_price,min:0,handleChange:u,className:"min-w-[8rem]"})]}),o("div",{className:"mr-4",children:[e(s,{forInput:"date",value:"Prezzo riservato",className:"mb-2"}),e(N,{step:.01,type:"number",name:"price",value:m.price,min:0,handleChange:u,className:"min-w-[8rem]"})]}),e(F,{type:"button",onClick:x,children:"Aggiungi"})]})})};export{ae as default};
