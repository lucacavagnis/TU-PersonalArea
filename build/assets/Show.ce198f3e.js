import{j as e,u as F,a as t,L as y,H as j,d as v}from"./app.78351115.js";import{B as g,P as T,a as h,T as P,A as S}from"./AuthenticatedLayout.ef00b35d.js";import{T as b}from"./Tab.e1f04ee8.js";import{T as r}from"./TextInput.33b7277f.js";import{I as d}from"./InputLabel.3e65c07c.js";import{I as n}from"./InputError.3013fedc.js";import"./ApplicationLogo.7addb485.js";import"./transition.fcbacdfa.js";import"./tw-merge.25811ea8.js";function D(s){const f=(s.disabled?"bg-blue-400 cursor-default":"bg-blue-700 cursor-pointer hover:bg-blue-600")+" block w-fit rounded-md font-medium text-sm text-slate-50 py-2 px-4 mt-4 transition-colors  "+s.className,{className:l,...p}=s;return e(g,{className:f+" "+l,...p,children:s.children})}function O(s){const{post:f,data:l,setData:p,errors:i}=F({office:"",ioc:"",country:"",province:"",city:"",postal_code:"",address:""}),m=s.cart,o=a=>{p(a.target.name,a.target.value)},x=a=>{a.preventDefault(),f(route("orders.store"))},w=(a,c)=>{a.preventDefault(),v.Inertia.visit(route("cart.destroy",c),{method:"delete"})},C=a=>{a.preventDefault(),v.Inertia.visit(route("cart.empty"),{method:"delete"})},N=(a=0)=>{let c=0;return m.products.map(u=>{c+=u.data.reserved_price*u.qty}),e(h,{className:"float-right font-bold",value:c+a})},q=a=>{v.Inertia.visit(route("cart.update",a.target.name.split("-")[0]),{method:"put",data:{qty:a.target.value},preserveScroll:!0})},I=m.products.map((a,c)=>{const u=c+"-qty_requested",_=Object.keys(a.configured_products).length;return t(b,{className:"relative p-4 flex justify-between ",containerClassName:"mb-4",children:[e("div",{className:"w-1/4 mr-4 min-h-[8em]",children:e(T,{name:a.data.image,className:"w-full h-full rounded-md"})}),t("div",{className:"w-3/5 relative",children:[e(y,{className:"font-semibold hover:underline",href:route("products.show",a.data.id),children:a.data.name}),t("p",{className:"text-sm",children:[a.data.prot_number," - ",a.data.prot_date]}),e("p",{className:"text-sm text-indigo-700",children:_+" prodotti configurati"}),t("div",{className:"absolute bottom-0 left-0 ",children:[e(h,{value:a.data.reserved_price*a.qty,className:"font-bold mr-2"}),t("span",{className:"text-sm",children:["(",a.qty,"x",e(h,{value:a.data.reserved_price}),")"]})]})]}),t("div",{className:"w-1/6 relative",children:[e(P,{className:"absolute right-0 scale-75 top-0 cursor-pointer",onClick:k=>w(k,c)}),e(r,{type:"number",name:u,className:"mt-1 block absolute right-0 bottom-0",autoComplete:"qty_requested",value:a.qty,isFocused:!1,max:a.data.qty_available,handleChange:q,min:0})]})]},a.data.id)});return t(S,{auth:s.auth,errors:s.errors,header:"Riepilogo ordine",children:[e(j,{title:"Home"}),e("div",{className:"py-12",children:t("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[m.products.length>0&&t("div",{className:"flex justify-between",children:[e("div",{className:"w-1/2",children:I}),e("div",{className:"w-2/5 ",children:e(b,{children:t("form",{onSubmit:x,children:[t("div",{className:"mb-2 border-b b-grey-500 pb-5",children:[e("h2",{className:"font-bold mb-4",children:"Dati referente e ordine"}),t("div",{className:"mb-4",children:[e(d,{forInput:"office",value:"Ufficio",required:!0}),e(r,{type:"text",name:"office",value:l.office,className:"mt-1 block w-full",autoComplete:"office",required:!0,isFocused:!1,handleChange:o}),e(n,{message:i.office,className:"mt-2"})]}),t("div",{className:"mb-4",children:[e(d,{forInput:"ioc",value:"Codice ordine (Codice di riferimento interno)"}),e(r,{type:"text",name:"ioc",value:l.ioc,className:"mt-1 block w-full",autoComplete:"ioc",required:!1,isFocused:!1,handleChange:o}),e(n,{message:i.ioc,className:"mt-2"})]})]}),t("div",{className:"mb-2 border-b b-grey-500 py-5",children:[e("h2",{className:"font-bold mb-4",children:"Dati spedizione"}),t("div",{className:"flex justify-between",children:[e("div",{className:"w-1/2 mr-2",children:t("div",{className:"mb-4",children:[e(d,{forInput:"country",value:"Stato",required:!0}),e(r,{type:"text",name:"country",value:l.country,className:"mt-1 block w-full",autoComplete:"country",required:!0,isFocused:!1,handleChange:o}),e(n,{message:i.country,className:"mt-2"})]})}),e("div",{className:"w-1/2 ml-2",children:t("div",{className:"mb-4",children:[e(d,{forInput:"province",value:"Provincia(XX)",required:!0}),e(r,{type:"text",name:"province",value:l.province,className:"mt-1 block w-full",autoComplete:"province",required:!0,isFocused:!1,handleChange:o,placeholder:"MI"}),e(n,{message:i.province,className:"mt-2"})]})})]}),t("div",{className:"flex justify-between",children:[e("div",{className:"w-1/2 mr-2",children:t("div",{className:"mb-4",children:[e(d,{forInput:"city",value:"Citt\xE0",required:!0}),e(r,{type:"text",name:"city",value:l.city,className:"mt-1 block w-full",autoComplete:"city",required:!0,isFocused:!1,handleChange:o}),e(n,{message:i.city,className:"mt-2"})]})}),e("div",{className:"w-1/2 ml-2",children:t("div",{className:"mb-4",children:[e(d,{forInput:"postal_code",value:"CAP",required:!0}),e(r,{type:"text",name:"postal_code",value:l.postal_code,className:"mt-1 block w-full",autoComplete:"postal_code",required:!0,isFocused:!1,handleChange:o}),e(n,{message:i.postal_code,className:"mt-2"})]})})]}),t("div",{className:"mb-4",children:[e(d,{forInput:"address",value:"Indirizzo (Via e n\xB0 civico)",required:!0}),e(r,{type:"text",name:"address",value:l.address,className:"mt-1 block w-full",autoComplete:"address",required:!1,isFocused:!1,handleChange:o}),e(n,{message:i.address,className:"mt-2"})]})]}),t("div",{className:"border-b border-grey-300 mt-5 pb-5 h-16",children:[t("div",{className:"w-full h-8",children:[e("span",{className:"float-left font-bold",children:"Subtotale"}),e("span",{children:N()})]}),e("p",{className:"float-left",children:"+ Spese di trasporto"}),e("span",{children:e(h,{value:20,className:"float-right"})})]}),t("div",{className:"w-full h-10 mt-5",children:[e("span",{className:"float-left font-bold",children:"Totale"}),e("span",{children:N(20)})]}),e(g,{type:"submit",className:"w-full py-4 text-center text-lg",children:"Invia ordine"}),e("div",{className:"w-full text-center py-4",children:e(y,{as:"button",className:"text-center text-indigo-700 font-semibold",onClick:a=>C(a),children:"Svuota il carrello"})})]})})})]}),m.products.length<=0&&t(b,{children:[e("h2",{className:"font-bold",children:"Il tuo carrello \xE8 vuoto"}),e("p",{children:"Aggiungi pordotti al tuo carrello per procedere con l'ordine."}),e(D,{type:"link",href:route("products.index"),children:"Visualizza prodotti"})]})]})})]})}export{O as default};
